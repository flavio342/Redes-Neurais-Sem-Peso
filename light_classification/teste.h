const int SIGNAL_SIZE = 100;
const int INPUT_SIZE = SIGNAL_SIZE*6;
const int BITS_PER_RAM = 20;
const int N_NEURONIOS = INPUT_SIZE/BITS_PER_RAM;
const int INPUT_FACTOR = 1.5;

const PROGMEM String labels[5] = {"front","idle","right","back","left"};
const PROGMEM int nNeuronios[] = {30};
const PROGMEM int nIndicesDeEntradas[] = {20};
const PROGMEM int indicesDeEntradas[5][30][20] = {{{80,508,457,153,297,269,391,473,55,16,502,258,456,1,266,432,137,568,541,19},{15,325,563,227,130,252,20,135,264,301,142,141,132,280,178,13,504,339,387,112},{595,517,74,203,434,426,561,254,497,402,184,354,530,507,305,355,24,148,478,247},{103,331,421,405,223,263,308,467,315,233,294,21,30,423,590,359,234,101,304,588},{463,327,519,139,311,572,348,274,161,333,575,3,471,491,533,442,484,309,337,246},{38,524,343,116,298,286,207,200,323,377,371,270,18,131,102,357,520,480,479,490},{151,509,403,51,9,8,451,150,67,378,201,46,94,318,99,166,429,271,191,283},{17,228,248,111,68,546,312,124,372,495,14,12,89,437,97,427,412,335,136,586},{485,314,138,395,235,353,193,386,42,181,582,534,186,523,188,566,449,245,156,5},{536,32,496,579,349,105,527,585,422,303,221,208,121,408,257,115,65,404,179,300},{197,529,547,22,120,199,593,469,206,127,410,505,559,211,535,414,290,592,144,438},{56,96,550,126,454,365,503,220,205,174,521,366,573,537,78,334,62,33,49,516},{466,492,210,370,462,229,345,133,53,164,540,341,556,275,168,465,489,7,398,60},{73,538,34,152,596,255,75,100,157,443,66,551,236,581,548,182,162,289,64,390},{31,6,589,187,363,277,196,45,549,578,577,77,140,375,584,329,411,394,167,328},{194,158,57,177,591,278,392,385,558,241,192,213,204,499,526,189,216,336,356,364},{147,23,149,50,342,48,54,389,185,470,306,512,93,310,472,58,565,108,458,594},{482,214,76,319,545,183,528,88,542,27,217,531,464,539,486,435,409,110,267,98},{420,397,163,43,571,461,330,324,494,276,249,222,160,25,384,260,350,41,231,87},{84,170,483,256,259,376,145,2,332,313,400,281,418,440,154,302,293,129,262,358},{552,554,173,399,37,52,321,515,104,452,518,209,424,500,239,425,441,367,506,543},{574,347,107,155,123,351,446,39,413,430,225,307,92,436,29,587,475,379,171,553},{570,85,450,488,382,407,265,557,580,232,459,251,91,198,79,525,569,72,352,243},{71,180,146,433,0,117,273,11,373,362,481,122,190,320,175,360,165,415,460,474},{583,316,287,501,445,326,237,172,69,468,70,431,299,576,439,597,83,285,338,202},{288,224,295,4,261,268,176,242,455,401,291,383,226,109,10,143,374,522,498,296},{598,272,493,238,428,599,134,86,369,317,215,26,230,250,240,511,368,444,532,419},{282,447,381,380,361,195,346,388,560,453,510,417,477,284,118,90,396,514,219,59},{487,169,159,35,244,416,125,113,344,28,253,564,393,114,340,292,63,61,555,82},{40,513,218,119,279,476,47,406,448,544,81,212,44,128,95,562,567,36,106,322}},{{80,508,457,153,297,269,391,473,55,16,502,258,456,1,266,432,137,568,541,19},{15,325,563,227,130,252,20,135,264,301,142,141,132,280,178,13,504,339,387,112},{595,517,74,203,434,426,561,254,497,402,184,354,530,507,305,355,24,148,478,247},{103,331,421,405,223,263,308,467,315,233,294,21,30,423,590,359,234,101,304,588},{463,327,519,139,311,572,348,274,161,333,575,3,471,491,533,442,484,309,337,246},{38,524,343,116,298,286,207,200,323,377,371,270,18,131,102,357,520,480,479,490},{151,509,403,51,9,8,451,150,67,378,201,46,94,318,99,166,429,271,191,283},{17,228,248,111,68,546,312,124,372,495,14,12,89,437,97,427,412,335,136,586},{485,314,138,395,235,353,193,386,42,181,582,534,186,523,188,566,449,245,156,5},{536,32,496,579,349,105,527,585,422,303,221,208,121,408,257,115,65,404,179,300},{197,529,547,22,120,199,593,469,206,127,410,505,559,211,535,414,290,592,144,438},{56,96,550,126,454,365,503,220,205,174,521,366,573,537,78,334,62,33,49,516},{466,492,210,370,462,229,345,133,53,164,540,341,556,275,168,465,489,7,398,60},{73,538,34,152,596,255,75,100,157,443,66,551,236,581,548,182,162,289,64,390},{31,6,589,187,363,277,196,45,549,578,577,77,140,375,584,329,411,394,167,328},{194,158,57,177,591,278,392,385,558,241,192,213,204,499,526,189,216,336,356,364},{147,23,149,50,342,48,54,389,185,470,306,512,93,310,472,58,565,108,458,594},{482,214,76,319,545,183,528,88,542,27,217,531,464,539,486,435,409,110,267,98},{420,397,163,43,571,461,330,324,494,276,249,222,160,25,384,260,350,41,231,87},{84,170,483,256,259,376,145,2,332,313,400,281,418,440,154,302,293,129,262,358},{552,554,173,399,37,52,321,515,104,452,518,209,424,500,239,425,441,367,506,543},{574,347,107,155,123,351,446,39,413,430,225,307,92,436,29,587,475,379,171,553},{570,85,450,488,382,407,265,557,580,232,459,251,91,198,79,525,569,72,352,243},{71,180,146,433,0,117,273,11,373,362,481,122,190,320,175,360,165,415,460,474},{583,316,287,501,445,326,237,172,69,468,70,431,299,576,439,597,83,285,338,202},{288,224,295,4,261,268,176,242,455,401,291,383,226,109,10,143,374,522,498,296},{598,272,493,238,428,599,134,86,369,317,215,26,230,250,240,511,368,444,532,419},{282,447,381,380,361,195,346,388,560,453,510,417,477,284,118,90,396,514,219,59},{487,169,159,35,244,416,125,113,344,28,253,564,393,114,340,292,63,61,555,82},{40,513,218,119,279,476,47,406,448,544,81,212,44,128,95,562,567,36,106,322}},{{80,508,457,153,297,269,391,473,55,16,502,258,456,1,266,432,137,568,541,19},{15,325,563,227,130,252,20,135,264,301,142,141,132,280,178,13,504,339,387,112},{595,517,74,203,434,426,561,254,497,402,184,354,530,507,305,355,24,148,478,247},{103,331,421,405,223,263,308,467,315,233,294,21,30,423,590,359,234,101,304,588},{463,327,519,139,311,572,348,274,161,333,575,3,471,491,533,442,484,309,337,246},{38,524,343,116,298,286,207,200,323,377,371,270,18,131,102,357,520,480,479,490},{151,509,403,51,9,8,451,150,67,378,201,46,94,318,99,166,429,271,191,283},{17,228,248,111,68,546,312,124,372,495,14,12,89,437,97,427,412,335,136,586},{485,314,138,395,235,353,193,386,42,181,582,534,186,523,188,566,449,245,156,5},{536,32,496,579,349,105,527,585,422,303,221,208,121,408,257,115,65,404,179,300},{197,529,547,22,120,199,593,469,206,127,410,505,559,211,535,414,290,592,144,438},{56,96,550,126,454,365,503,220,205,174,521,366,573,537,78,334,62,33,49,516},{466,492,210,370,462,229,345,133,53,164,540,341,556,275,168,465,489,7,398,60},{73,538,34,152,596,255,75,100,157,443,66,551,236,581,548,182,162,289,64,390},{31,6,589,187,363,277,196,45,549,578,577,77,140,375,584,329,411,394,167,328},{194,158,57,177,591,278,392,385,558,241,192,213,204,499,526,189,216,336,356,364},{147,23,149,50,342,48,54,389,185,470,306,512,93,310,472,58,565,108,458,594},{482,214,76,319,545,183,528,88,542,27,217,531,464,539,486,435,409,110,267,98},{420,397,163,43,571,461,330,324,494,276,249,222,160,25,384,260,350,41,231,87},{84,170,483,256,259,376,145,2,332,313,400,281,418,440,154,302,293,129,262,358},{552,554,173,399,37,52,321,515,104,452,518,209,424,500,239,425,441,367,506,543},{574,347,107,155,123,351,446,39,413,430,225,307,92,436,29,587,475,379,171,553},{570,85,450,488,382,407,265,557,580,232,459,251,91,198,79,525,569,72,352,243},{71,180,146,433,0,117,273,11,373,362,481,122,190,320,175,360,165,415,460,474},{583,316,287,501,445,326,237,172,69,468,70,431,299,576,439,597,83,285,338,202},{288,224,295,4,261,268,176,242,455,401,291,383,226,109,10,143,374,522,498,296},{598,272,493,238,428,599,134,86,369,317,215,26,230,250,240,511,368,444,532,419},{282,447,381,380,361,195,346,388,560,453,510,417,477,284,118,90,396,514,219,59},{487,169,159,35,244,416,125,113,344,28,253,564,393,114,340,292,63,61,555,82},{40,513,218,119,279,476,47,406,448,544,81,212,44,128,95,562,567,36,106,322}},{{80,508,457,153,297,269,391,473,55,16,502,258,456,1,266,432,137,568,541,19},{15,325,563,227,130,252,20,135,264,301,142,141,132,280,178,13,504,339,387,112},{595,517,74,203,434,426,561,254,497,402,184,354,530,507,305,355,24,148,478,247},{103,331,421,405,223,263,308,467,315,233,294,21,30,423,590,359,234,101,304,588},{463,327,519,139,311,572,348,274,161,333,575,3,471,491,533,442,484,309,337,246},{38,524,343,116,298,286,207,200,323,377,371,270,18,131,102,357,520,480,479,490},{151,509,403,51,9,8,451,150,67,378,201,46,94,318,99,166,429,271,191,283},{17,228,248,111,68,546,312,124,372,495,14,12,89,437,97,427,412,335,136,586},{485,314,138,395,235,353,193,386,42,181,582,534,186,523,188,566,449,245,156,5},{536,32,496,579,349,105,527,585,422,303,221,208,121,408,257,115,65,404,179,300},{197,529,547,22,120,199,593,469,206,127,410,505,559,211,535,414,290,592,144,438},{56,96,550,126,454,365,503,220,205,174,521,366,573,537,78,334,62,33,49,516},{466,492,210,370,462,229,345,133,53,164,540,341,556,275,168,465,489,7,398,60},{73,538,34,152,596,255,75,100,157,443,66,551,236,581,548,182,162,289,64,390},{31,6,589,187,363,277,196,45,549,578,577,77,140,375,584,329,411,394,167,328},{194,158,57,177,591,278,392,385,558,241,192,213,204,499,526,189,216,336,356,364},{147,23,149,50,342,48,54,389,185,470,306,512,93,310,472,58,565,108,458,594},{482,214,76,319,545,183,528,88,542,27,217,531,464,539,486,435,409,110,267,98},{420,397,163,43,571,461,330,324,494,276,249,222,160,25,384,260,350,41,231,87},{84,170,483,256,259,376,145,2,332,313,400,281,418,440,154,302,293,129,262,358},{552,554,173,399,37,52,321,515,104,452,518,209,424,500,239,425,441,367,506,543},{574,347,107,155,123,351,446,39,413,430,225,307,92,436,29,587,475,379,171,553},{570,85,450,488,382,407,265,557,580,232,459,251,91,198,79,525,569,72,352,243},{71,180,146,433,0,117,273,11,373,362,481,122,190,320,175,360,165,415,460,474},{583,316,287,501,445,326,237,172,69,468,70,431,299,576,439,597,83,285,338,202},{288,224,295,4,261,268,176,242,455,401,291,383,226,109,10,143,374,522,498,296},{598,272,493,238,428,599,134,86,369,317,215,26,230,250,240,511,368,444,532,419},{282,447,381,380,361,195,346,388,560,453,510,417,477,284,118,90,396,514,219,59},{487,169,159,35,244,416,125,113,344,28,253,564,393,114,340,292,63,61,555,82},{40,513,218,119,279,476,47,406,448,544,81,212,44,128,95,562,567,36,106,322}},{{80,508,457,153,297,269,391,473,55,16,502,258,456,1,266,432,137,568,541,19},{15,325,563,227,130,252,20,135,264,301,142,141,132,280,178,13,504,339,387,112},{595,517,74,203,434,426,561,254,497,402,184,354,530,507,305,355,24,148,478,247},{103,331,421,405,223,263,308,467,315,233,294,21,30,423,590,359,234,101,304,588},{463,327,519,139,311,572,348,274,161,333,575,3,471,491,533,442,484,309,337,246},{38,524,343,116,298,286,207,200,323,377,371,270,18,131,102,357,520,480,479,490},{151,509,403,51,9,8,451,150,67,378,201,46,94,318,99,166,429,271,191,283},{17,228,248,111,68,546,312,124,372,495,14,12,89,437,97,427,412,335,136,586},{485,314,138,395,235,353,193,386,42,181,582,534,186,523,188,566,449,245,156,5},{536,32,496,579,349,105,527,585,422,303,221,208,121,408,257,115,65,404,179,300},{197,529,547,22,120,199,593,469,206,127,410,505,559,211,535,414,290,592,144,438},{56,96,550,126,454,365,503,220,205,174,521,366,573,537,78,334,62,33,49,516},{466,492,210,370,462,229,345,133,53,164,540,341,556,275,168,465,489,7,398,60},{73,538,34,152,596,255,75,100,157,443,66,551,236,581,548,182,162,289,64,390},{31,6,589,187,363,277,196,45,549,578,577,77,140,375,584,329,411,394,167,328},{194,158,57,177,591,278,392,385,558,241,192,213,204,499,526,189,216,336,356,364},{147,23,149,50,342,48,54,389,185,470,306,512,93,310,472,58,565,108,458,594},{482,214,76,319,545,183,528,88,542,27,217,531,464,539,486,435,409,110,267,98},{420,397,163,43,571,461,330,324,494,276,249,222,160,25,384,260,350,41,231,87},{84,170,483,256,259,376,145,2,332,313,400,281,418,440,154,302,293,129,262,358},{552,554,173,399,37,52,321,515,104,452,518,209,424,500,239,425,441,367,506,543},{574,347,107,155,123,351,446,39,413,430,225,307,92,436,29,587,475,379,171,553},{570,85,450,488,382,407,265,557,580,232,459,251,91,198,79,525,569,72,352,243},{71,180,146,433,0,117,273,11,373,362,481,122,190,320,175,360,165,415,460,474},{583,316,287,501,445,326,237,172,69,468,70,431,299,576,439,597,83,285,338,202},{288,224,295,4,261,268,176,242,455,401,291,383,226,109,10,143,374,522,498,296},{598,272,493,238,428,599,134,86,369,317,215,26,230,250,240,511,368,444,532,419},{282,447,381,380,361,195,346,388,560,453,510,417,477,284,118,90,396,514,219,59},{487,169,159,35,244,416,125,113,344,28,253,564,393,114,340,292,63,61,555,82},{40,513,218,119,279,476,47,406,448,544,81,212,44,128,95,562,567,36,106,322}}};
const PROGMEM int nDados[5][30] = {{6,5,4,5,1,4,1,3,1,3,2,2,1,1,2,2,2,2,2,1,2,2,1,1,3,2,2,1,2,1},{1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1},{2,3,2,4,1,4,1,4,1,10,3,2,1,1,2,1,4,3,1,2,2,5,2,6,1,2,1,2,4,5},{1,1,1,2,1,1,3,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1},{1,1,3,3,2,7,1,1,3,5,3,2,1,1,1,2,2,2,1,2,1,2,2,1,1,4,1,1,1,1}};
const PROGMEM long long int tabelaDeDadosKeys[5][30][10] = {{{1088,1089,1601,1600,64,576,0,0,0,0},{525328,533520,16,524304,532496,0,0,0,0,0},{65544,0,65536,8,0,0,0,0,0,0},{524676,388,260,4,524548,0,0,0,0,0},{256,0,0,0,0,0,0,0,0,0},{4128,4224,4096,4256,0,0,0,0,0,0},{49664,0,0,0,0,0,0,0,0,0},{256,768,525056,0,0,0,0,0,0,0},{1,0,0,0,0,0,0,0,0,0},{0,1,262144,0,0,0,0,0,0,0},{0,65536,0,0,0,0,0,0,0,0},{0,4,0,0,0,0,0,0,0,0},{4,0,0,0,0,0,0,0,0,0},{4096,0,0,0,0,0,0,0,0,0},{262144,786432,0,0,0,0,0,0,0,0},{0,128,0,0,0,0,0,0,0,0},{0,262144,0,0,0,0,0,0,0,0},{0,1024,0,0,0,0,0,0,0,0},{0,64,0,0,0,0,0,0,0,0},{4608,0,0,0,0,0,0,0,0,0},{64,2112,0,0,0,0,0,0,0,0},{0,32,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{36864,0,0,0,0,0,0,0,0,0},{0,65537,65536,0,0,0,0,0,0,0},{65568,66592,0,0,0,0,0,0,0,0},{0,256,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,1024,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0}},{{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,4096,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,512,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0}},{{0,64,0,0,0,0,0,0,0,0},{1025,1024,1,0,0,0,0,0,0,0},{1056,1024,0,0,0,0,0,0,0,0},{524294,589830,524292,589828,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{65568,69664,4128,32,0,0,0,0,0,0},{131072,0,0,0,0,0,0,0,0,0},{69632,65544,0,65536,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{16404,16533,16405,16389,17413,16597,16400,1025,16469,17477},{32768,0,512,0,0,0,0,0,0,0},{0,65536,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{4096,0,0,0,0,0,0,0,0,0},{0,8,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,4,516,512,0,0,0,0,0,0},{0,4,12,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{528,512,0,0,0,0,0,0,0,0},{2112,2048,0,0,0,0,0,0,0,0},{163840,0,256,131328,131072,0,0,0,0,0},{0,16384,0,0,0,0,0,0,0,0},{0,49152,49408,16640,16384,32768,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{1088,1024,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,32,0,0,0,0,0,0,0,0},{4160,0,4096,12352,0,0,0,0,0,0},{4098,69634,0,65538,2,0,0,0,0,0}},{{0,0,0,0,0,0,0,0,0,0},{1024,0,0,0,0,0,0,0,0,0},{1056,0,0,0,0,0,0,0,0,0},{8198,10246,0,0,0,0,0,0,0,0},{32772,0,0,0,0,0,0,0,0,0},{4096,0,0,0,0,0,0,0,0,0},{131584,131648,131072,0,0,0,0,0,0,0},{8192,0,0,0,0,0,0,0,0,0},{262144,0,0,0,0,0,0,0,0,0},{1025,1029,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{4096,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{576,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{1552,0,0,0,0,0,0,0,0,0},{64,0,0,0,0,0,0,0,0,0},{256,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,262144,0,0,0,0,0,0,0,0},{1024,0,0,0,0,0,0,0,0,0},{0,1024,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0}},{{262720,0,0,0,0,0,0,0,0,0},{1032,0,0,0,0,0,0,0,0,0},{327776,327744,328800,0,0,0,0,0,0,0},{524294,6,4,0,0,0,0,0,0,0},{131328,131072,0,0,0,0,0,0,0,0},{12320,266280,266248,274440,274472,4136,12328,0,0,0},{262656,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{65,0,64,0,0,0,0,0,0,0},{1,1025,1281,8193,9217,0,0,0,0,0},{264448,262400,2304,0,0,0,0,0,0,0},{10241,10753,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{4096,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{160,128,0,0,0,0,0,0,0,0},{256,768,0,0,0,0,0,0,0,0},{0,8192,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{4624,528,0,0,0,0,0,0,0,0},{4674,0,0,0,0,0,0,0,0,0},{0,256,0,0,0,0,0,0,0,0},{0,16,0,0,0,0,0,0,0,0},{32768,0,0,0,0,0,0,0,0,0},{65537,0,0,0,0,0,0,0,0,0},{66560,1028,1024,66564,0,0,0,0,0,0},{16,0,0,0,0,0,0,0,0,0},{516,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0},{262144,0,0,0,0,0,0,0,0,0}}};
const PROGMEM int tabelaDeDadosValues[5][30][10]= {{{6,62,7,4,5,2,0,0,0,0},{3,12,1,18,52,0,0,0,0,0},{34,21,28,3,0,0,0,0,0,0},{4,1,26,28,27,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{5,16,7,58,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{1,9,76,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{31,54,1,0,0,0,0,0,0,0},{39,47,0,0,0,0,0,0,0,0},{85,1,0,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{81,5,0,0,0,0,0,0,0,0},{79,7,0,0,0,0,0,0,0,0},{44,42,0,0,0,0,0,0,0,0},{66,20,0,0,0,0,0,0,0,0},{55,31,0,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{82,4,0,0,0,0,0,0,0,0},{78,8,0,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{1,75,10,0,0,0,0,0,0,0},{28,58,0,0,0,0,0,0,0,0},{62,24,0,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0},{73,13,0,0,0,0,0,0,0,0},{86,0,0,0,0,0,0,0,0,0}},{{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{96,20,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{87,29,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0},{116,0,0,0,0,0,0,0,0,0}},{{106,13,0,0,0,0,0,0,0,0},{83,10,26,0,0,0,0,0,0,0},{10,109,0,0,0,0,0,0,0,0},{3,8,4,104,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{100,3,2,14,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{2,1,8,108,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{3,23,15,1,6,6,2,1,57,5},{38,63,18,0,0,0,0,0,0,0},{118,1,0,0,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{113,6,0,0,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{1,112,3,3,0,0,0,0,0,0},{7,61,51,0,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{13,106,0,0,0,0,0,0,0,0},{106,13,0,0,0,0,0,0,0,0},{16,2,2,1,98,0,0,0,0,0},{26,93,0,0,0,0,0,0,0,0},{6,3,2,19,69,20,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{113,6,0,0,0,0,0,0,0,0},{119,0,0,0,0,0,0,0,0,0},{42,77,0,0,0,0,0,0,0,0},{106,10,2,1,0,0,0,0,0,0},{39,61,3,2,14,0,0,0,0,0}},{{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{6,19,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{17,1,7,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{24,1,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{19,6,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{21,4,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0},{25,0,0,0,0,0,0,0,0,0}},{{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{2,25,26,0,0,0,0,0,0,0},{25,7,21,0,0,0,0,0,0,0},{31,22,0,0,0,0,0,0,0,0},{3,8,3,5,11,10,13,0,0,0},{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{1,13,39,0,0,0,0,0,0,0},{1,33,2,2,15,0,0,0,0,0},{2,2,49,0,0,0,0,0,0,0},{5,48,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{22,31,0,0,0,0,0,0,0,0},{28,25,0,0,0,0,0,0,0,0},{44,9,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{35,18,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{30,23,0,0,0,0,0,0,0,0},{26,27,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{1,43,6,3,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0},{53,0,0,0,0,0,0,0,0,0}}};


int definirBleachingDeUmaRede(int rede) {

  int somaHits = 0;
  int nHits = 0;
  for (int neuronio = 0; neuronio < pgm_read_word_near(nNeuronios); neuronio++) {
    for (int hit = 0; hit < pgm_read_word_near(&nDados[rede][neuronio]); hit++) {
      somaHits += pgm_read_word_near(&tabelaDeDadosValues[rede][neuronio][hit]);
      if (pgm_read_word_near(&tabelaDeDadosValues[rede][neuronio][hit]) > 0) {
        nHits++;
      }
    }
  }
  return somaHits / nHits;
}

int* definirBleachingDasRedes() {

  int somaBleaching[] = {0,0,0,0,0};

  for (int i = 0; i < 5; i++) {
    somaBleaching[i] = definirBleachingDeUmaRede(i);
  }
  return somaBleaching;
}

long powered(int base, int expo){
  long result = 1;
  for(int i=0;i<expo;i++){
    result *= base;
  }
  return result;
}

long binConv(String binary)
{
  long decimal = 0;
  
  for (int counter = 0; counter < BITS_PER_RAM ; counter++)
  {
    if (binary[counter] == '1'){
      decimal += powered(2,BITS_PER_RAM - 1 - counter); 
    }
  }
  return decimal;
}

int testeDeEntrada(int rede, int* entrada, int limiteDoBleaching) {

  int resultado = 0;
  for (int neuronio = 0; neuronio < pgm_read_word_near(nNeuronios); neuronio++) {
    
    String tabelaKey = "";
    for (int indice = 0; indice < pgm_read_word_near(nIndicesDeEntradas); indice++) {
      if (entrada[pgm_read_word_near(&indicesDeEntradas[rede][neuronio][indice])] > 0) {
        tabelaKey += "1";
      } else {
        tabelaKey += "0";
      }
    }
    
    for (int dado = 0; dado < pgm_read_word_near(&nDados[rede][neuronio]); dado++) {
      if (binConv(tabelaKey) == pgm_read_dword(&tabelaDeDadosKeys[rede][neuronio][dado])) {
        if (pgm_read_word_near(&tabelaDeDadosValues[rede][neuronio][dado]) > limiteDoBleaching) {
          resultado++;
        }
      }
    }

  }
  return resultado;
}

String testarRedes(int* limiteDoBleaching, int* entrada) {

  int melhorResultado = -1;
  String labelDoMelhorResultado = "";

  for (int rede = 0; rede < 5; rede++) {
    int resultado = testeDeEntrada(rede, entrada, limiteDoBleaching[rede]);
    if (resultado > melhorResultado) {
      melhorResultado = resultado;
      labelDoMelhorResultado = labels[rede];
    }
  }
  return labelDoMelhorResultado;
}



